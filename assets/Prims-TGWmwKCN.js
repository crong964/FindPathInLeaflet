(function(){"use strict";onmessage=async a=>{var u;let i=JSON.parse(a.data),e={disFin:l(i.sta,i.fin),poi:i.sta,previousPoi:""},o=new Map;o.set(e.poi,e);let n=new Map,t=e;for(;o.has(i.fin)==!1&&t;){let P=i.data[t.poi];await h(),P.map(s=>{var d;if(!o.has(s)){if(n.has(s)){let r=n.get(s),c={poi:s,disFin:((d=n.get(s))==null?void 0:d.disFin)||0,previousPoi:t.previousPoi};r&&c.disFin<(r==null?void 0:r.disFin)&&n.set(s,c)}else n.set(s,{disFin:l(s,i.fin),poi:s,previousPoi:t.poi});postMessage(JSON.stringify({type:"connectWaite",sta:t.poi,fin:s}))}}),t=F(n),t&&(o.set(t.poi,t),n.delete(t.poi))}let f=[],p=i.fin;do f.push(p),p=(u=o.get(p))==null?void 0:u.previousPoi;while(p);postMessage(JSON.stringify(f)),close()};function F(a){let i;return a.forEach(e=>{i==null&&(i=e),i.disFin>e.disFin&&(i=e)}),i}function l(a,i){let e=a.split(","),o=i.split(",");return Math.sqrt((parseFloat(e[0])-parseFloat(o[0]))**2+(parseFloat(e[1])-parseFloat(o[1]))**2)}function h(){return new Promise(a=>{setTimeout(()=>{a("")},100)})}})();
